# é¡¹ç›®ç›®å½•ç»“æ„è¯´æ˜

## æ¦‚è¿°

æ­¤é¡¹ç›®æ˜¯uniapp+vue3+vite+pinia+tailwindcss+mockæŠ€æœ¯æ ˆç»„æˆçš„æ¨¡æ¿ï¼Œå¯ç”¨äºAPPã€å°ç¨‹åºã€h5é¡¹ç›®çš„å¿«é€Ÿæ­å»ºã€‚

## ç›®å½•ç»“æ„

```text
UNI_TEMPLATE
â”œâ”€â”€ .hbuilderx
â”œâ”€â”€ .husky
â”œâ”€â”€ .vscode
â”œâ”€â”€ dist
â”œâ”€â”€ node_modules
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ apis
â”‚   â”œâ”€â”€ common
â”‚   â”œâ”€â”€ components
â”‚   â”œâ”€â”€ locale
â”‚   â”œâ”€â”€ pages
â”‚   â”œâ”€â”€ pagesSubPages
â”‚   â”œâ”€â”€ static
â”‚   â”œâ”€â”€ store
â”‚   â”œâ”€â”€ types
â”‚   â”œâ”€â”€ utils
â”‚   â”œâ”€â”€ App.vue
â”‚   â””â”€â”€ main.ts
â”œâ”€â”€ manifest.json
â”œâ”€â”€ pages.json
â”œâ”€â”€ uni.scss
â”œâ”€â”€ .editorconfig
â”œâ”€â”€ .env
â”œâ”€â”€ .env.beta
â”œâ”€â”€ .env.development
â”œâ”€â”€ .env.production
â”œâ”€â”€ .env.test
â”œâ”€â”€ .eslintrc.js
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .prettierignore
â”œâ”€â”€ .prettierrc
â”œâ”€â”€ commitlint.config.js
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ README.md
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

## è¯¦ç»†è¯´æ˜

### æ ¹ç›®å½•

| æ–‡ä»¶/ç›®å½•              | è¯´æ˜                                                 |
| ---------------------- | ---------------------------------------------------- |
| `.hbuilderx`           | HBuilderX ç¼–è¾‘å™¨ç›¸å…³é…ç½®ã€‚                           |
| `.husky`               | Git hooks ç›¸å…³é…ç½®ï¼Œç”¨äºè‡ªåŠ¨æ‰§è¡Œè„šæœ¬æ¥è§„èŒƒä»£ç æäº¤ã€‚ |
| `.vscode`              | VS Code ç¼–è¾‘å™¨çš„å·¥ä½œåŒºé…ç½®æ–‡ä»¶ã€‚                     |
| `dist`                 | é¡¹ç›®æ„å»ºåçš„æ–‡ä»¶ã€‚                                   |
| `node_modules`         | é¡¹ç›®çš„ä¾èµ–åŒ…ã€‚                                       |
| `.editorconfig`        | å®šä¹‰ä»£ç æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œç»Ÿä¸€ä¸åŒç¼–è¾‘å™¨çš„ç¼–ç é£æ ¼ã€‚   |
| `.env*`                | ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„ç¯å¢ƒã€‚               |
| `.eslintrc.js`         | ESLint çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰ä»£ç è§„èŒƒå’Œæ£€æŸ¥è§„åˆ™ã€‚      |
| `.eslintignore`        | eslintæŒ‡å®šä¸éœ€è¦çº³å…¥ç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶å’Œç›®å½•ã€‚      |
| `.gitignore`           | gitæŒ‡å®šä¸éœ€è¦çº³å…¥ç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶å’Œç›®å½•ã€‚                 |
| `.prettierignore`      | æŒ‡å®šä¸éœ€è¦ Prettier æ ¼å¼åŒ–çš„æ–‡ä»¶å’Œç›®å½•ã€‚             |
| `.prettierrc`          | Prettier çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰ä»£ç æ ¼å¼åŒ–è§„åˆ™ã€‚        |
| `commitlint.config.js` | Commitlint çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºè§„èŒƒ Git æäº¤ä¿¡æ¯ã€‚       |
| `index.html`           | é¡¹ç›®çš„ HTML å…¥å£æ–‡ä»¶ã€‚                               |
| `package.json`         | é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œè®°å½•é¡¹ç›®çš„ä¾èµ–å’Œé…ç½®ä¿¡æ¯ã€‚             |
| `pnpm-lock.yaml`       | PNPM åŒ…ç®¡ç†å™¨çš„é”å®šæ–‡ä»¶ï¼Œè®°å½•é¡¹ç›®ä¾èµ–çš„å…·ä½“ç‰ˆæœ¬ã€‚    |
| `README.md`            | é¡¹ç›®çš„è¯´æ˜æ–‡æ¡£ï¼Œä»‹ç»é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯å’Œä½¿ç”¨æ–¹æ³•ã€‚       |
| `tailwind.config.js`   | Tailwind CSS çš„é…ç½®æ–‡ä»¶ã€‚                            |
| `tsconfig.json`        | TypeScript çš„é…ç½®æ–‡ä»¶ã€‚                              |
| `vite.config.ts`       | Vite çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºé…ç½®æ„å»ºå’Œå¼€å‘æœåŠ¡å™¨ã€‚          |

### `src` ç›®å½•

| ç›®å½•/æ–‡ä»¶    | è¯´æ˜                                                  |
| ------------ | ----------------------------------------------------- |
| `apis`       | å­˜æ”¾ä¸åå°äº¤äº’çš„ API è¯·æ±‚å‡½æ•°ã€‚                       |
| `common`     | å­˜æ”¾å…¬å…±çš„å·¥å…·å‡½æ•°ã€å¸¸é‡ç­‰ã€‚                          |
| `components` | å­˜æ”¾é€šç”¨çš„ Vue ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥åœ¨å¤šä¸ªåœ°æ–¹é‡ç”¨ã€‚     |
| `hooks`      | å­˜æ”¾è‡ªå®šä¹‰çš„ Vue Composition API å‡½æ•°ï¼Œä¾¿äºé€»è¾‘å¤ç”¨ã€‚ |
| `locale`     | å­˜æ”¾å›½é™…åŒ–ç›¸å…³çš„æ–‡ä»¶ã€‚                                |
| `pages`      | å­˜æ”¾é¡µé¢çº§åˆ«çš„ç»„ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹ä»£è¡¨ä¸€ä¸ªé¡µé¢ã€‚          |
| `static`     | å­˜æ”¾é™æ€èµ„æºæ–‡ä»¶ï¼Œå¦‚å›¾ç‰‡ã€æ ·å¼ç­‰ã€‚                    |
| `store`      | å­˜æ”¾çŠ¶æ€ç®¡ç†ç›¸å…³çš„æ–‡ä»¶ï¼ˆå¦‚ Vuexï¼‰ã€‚                   |
| `types`      | å­˜æ”¾ TypeScript ç±»å‹å£°æ˜æ–‡ä»¶ã€‚                        |
| `utils`      | å­˜æ”¾å·¥å…·å‡½æ•°å’Œè¾…åŠ©ç±»ã€‚                                |
| `App.vue`    | é¡¹ç›®æ ¹ç»„ä»¶ã€‚                                          |
| `main.ts`    | é¡¹ç›®å…¥å£æ–‡ä»¶ï¼Œåˆå§‹åŒ–å¹¶æŒ‚è½½ Vue åº”ç”¨ã€‚                 |

### è¯¦ç»†ç›®å½•è¯´æ˜

#### ğŸ“ `.hbuilderx`

HBuilderX ç¼–è¾‘å™¨ç›¸å…³é…ç½®æ–‡ä»¶ã€‚

#### ğŸ“ `.husky`

Git hooks ç›¸å…³é…ç½®ï¼Œç”¨äºåœ¨ä»£ç æäº¤å‰åè‡ªåŠ¨æ‰§è¡Œä¸€äº›è„šæœ¬ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œè§„èŒƒã€‚

#### ğŸ“ `.vscode`

VS Code ç¼–è¾‘å™¨çš„å·¥ä½œåŒºé…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬è°ƒè¯•ã€ä»£ç ç‰‡æ®µç­‰è®¾ç½®ã€‚

#### ğŸ“ `dist`

é¡¹ç›®æ„å»ºåçš„æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼Œé€šå¸¸ç”¨äºç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€‚

#### ğŸ“ `node_modules`

å­˜æ”¾é€šè¿‡ npm æˆ– pnpm å®‰è£…çš„é¡¹ç›®ä¾èµ–åŒ…ã€‚

#### ğŸ“ `src`

é¡¹ç›®çš„æºä»£ç ç›®å½•ï¼Œæ˜¯å¼€å‘çš„ä¸»è¦ç›®å½•ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å­ç›®å½•å’Œæ–‡ä»¶ï¼š

- **apis**: ç”¨äºå®šä¹‰ä¸åå°äº¤äº’çš„ API è¯·æ±‚å‡½æ•°ï¼Œæ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚éƒ½åº”è¯¥é›†ä¸­åœ¨è¿™é‡Œç®¡ç†ã€‚
- **common**: å­˜æ”¾é¡¹ç›®ä¸­ä½¿ç”¨çš„å…¬å…±å·¥å…·å‡½æ•°å’Œå¸¸é‡ç­‰ï¼Œä¾¿äºåœ¨å¤šä¸ªæ¨¡å—ä¸­é‡ç”¨ã€‚
- **components**: å­˜æ”¾é€šç”¨çš„ Vue ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥åœ¨å¤šä¸ªåœ°æ–¹é‡ç”¨ã€‚
- **hooks**: å­˜æ”¾è‡ªå®šä¹‰çš„ Vue Composition API å‡½æ•°ï¼Œä¾¿äºé€»è¾‘å¤ç”¨ã€‚
- **locale**: å­˜æ”¾å›½é™…åŒ–ç›¸å…³çš„æ–‡ä»¶ï¼Œç”¨äºæ”¯æŒå¤šè¯­è¨€åŠŸèƒ½ã€‚
- **pages**: å­˜æ”¾é¡µé¢çº§åˆ«çš„ Vue ç»„ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹ä»£è¡¨ä¸€ä¸ªé¡µé¢ã€‚
- **static**: å­˜æ”¾é™æ€èµ„æºæ–‡ä»¶ï¼Œå¦‚å›¾ç‰‡ã€æ ·å¼ç­‰ã€‚
- **store**: å­˜æ”¾çŠ¶æ€ç®¡ç†ç›¸å…³çš„æ–‡ä»¶ï¼ˆå¦‚ Vuexï¼‰ã€‚
- **types**: å­˜æ”¾ TypeScript ç±»å‹å£°æ˜æ–‡ä»¶ã€‚
- **utils**: å­˜æ”¾å·¥å…·å‡½æ•°å’Œè¾…åŠ©ç±»ã€‚
- **App.vue**: é¡¹ç›®æ ¹ç»„ä»¶ï¼Œæ‰€æœ‰é¡µé¢å’Œç»„ä»¶çš„å…¥å£ã€‚
- **main.ts**: é¡¹ç›®å…¥å£æ–‡ä»¶ï¼Œåˆå§‹åŒ–å¹¶æŒ‚è½½ Vue åº”ç”¨ã€‚

### å…¶ä»–é…ç½®æ–‡ä»¶

#### ğŸŒ `.env*`

ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®ä¸åŒç¯å¢ƒåˆ†åˆ«å‘½åï¼Œä¾‹å¦‚ `.env.development`ã€`.env.production` ç­‰ã€‚

#### ğŸš¨ `.eslintrc.js`

ESLint é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰ä»£ç è§„èŒƒå’Œæ£€æŸ¥è§„åˆ™ï¼Œç¡®ä¿ä»£ç é£æ ¼ä¸€è‡´ã€‚

#### ğŸ“œ `.gitignore`

æŒ‡å®šå“ªäº›æ–‡ä»¶å’Œç›®å½•ä¸éœ€è¦çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œä¾‹å¦‚ `node_modules`ã€æ„å»ºåçš„æ–‡ä»¶ç­‰ã€‚

#### ğŸ¨ `.prettier*`

Prettier é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰ä»£ç æ ¼å¼åŒ–è§„åˆ™ï¼Œç¡®ä¿ä»£ç é£æ ¼ç»Ÿä¸€ã€‚

#### ğŸ”— `commitlint.config.js`

Commitlint é…ç½®æ–‡ä»¶ï¼Œç”¨äºè§„èŒƒ Git æäº¤ä¿¡æ¯ï¼Œç¡®ä¿æäº¤ä¿¡æ¯æ¸…æ™°æ˜äº†ã€‚

#### ğŸ“„ `index.html`

é¡¹ç›®çš„ HTML å…¥å£æ–‡ä»¶ï¼ŒVite ä¼šè‡ªåŠ¨æ³¨å…¥æ„å»ºåçš„èµ„æºã€‚

#### ğŸ“¦ `package.json`

é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œè®°å½•é¡¹ç›®çš„ä¾èµ–ã€è„šæœ¬å’Œé…ç½®ä¿¡æ¯ã€‚

#### ğŸ”’ `pnpm-lock.yaml`

PNPM åŒ…ç®¡ç†å™¨çš„é”å®šæ–‡ä»¶ï¼Œè®°å½•é¡¹ç›®ä¾èµ–çš„å…·ä½“ç‰ˆæœ¬ï¼Œç¡®ä¿æ¯æ¬¡å®‰è£…çš„ä¾èµ–ä¸€è‡´ã€‚

#### ğŸ“˜ `README.md`

é¡¹ç›®çš„è¯´æ˜æ–‡æ¡£ï¼Œä»‹ç»é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯ã€å®‰è£…å’Œä½¿ç”¨æ–¹æ³•ç­‰ã€‚

#### ğŸ›  `tailwind.config.js`

Tailwind CSS çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºè‡ªå®šä¹‰ Tailwind çš„é»˜è®¤é…ç½®ã€‚

#### ğŸ”§ `tsconfig.json`

TypeScript çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºé…ç½® TypeScript ç¼–è¯‘é€‰é¡¹ã€‚

#### âš™ï¸ `vite.config.ts`

Vite çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºé…ç½®é¡¹ç›®çš„æ„å»ºå’Œå¼€å‘æœåŠ¡å™¨ã€‚

## ç‰¹åˆ«è¯´æ˜

é¡¹ç›®ä¸­å¯å…¨å±€å¼€å¯/å…³é—­`mock`æ•°æ®ï¼Œåœ¨`.env`æ–‡ä»¶ä¸­è®¾ç½®`VITE_MOCK`çš„å€¼ï¼Œtrueæ˜¯å¼€å¯ï¼Œfalseæ˜¯å…³é—­ã€‚

```ts
VITE_MOCK = true
```

ä¹Ÿå¯ä»¥é’ˆå¯¹æŸä¸ªå•ç‹¬çš„æ¥å£å¼€å¯æˆ–è€…å…³é—­`mock`ï¼Œä¾‹å¦‚

```ts
function getBookData(): Promise<Data<Book>> {
  return apiService.get('/book', {}, { mock: true })
}
```

æœ¬é¡¹ç›®å·²ç»å¼€å¯äº†`easycom`è‡ªåŠ¨å¯¼å…¥ç»„ä»¶ï¼Œåœ¨`components`æ–‡ä»¶å¤¹ä¸­å»ºç«‹åŒåæ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œæ— é¡»æ‰‹åŠ¨å¯¼å…¥å³å¯åœ¨`vue`æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨ã€‚

```js
â”œâ”€â”€ components
â”‚   â”œâ”€â”€TestComponent
        â”œâ”€â”€TestComponent
```

```html
<template>
  <TestComponent />
</template>
```

æœ¬é¡¹ç›®å®‰è£…äº†[unplugin-auto-import](https://github.com/unplugin/unplugin-auto-import)æ’ä»¶ï¼Œæ— é¡»æ‰‹åŠ¨å¯¼å…¥`vue`ä»¥åŠ`pinia`å’Œ`uniapp`çš„apiå³å¯ç›´æ¥åœ¨`setup`ä¸­ä½¿ç”¨ã€‚

è¿™æ˜¯[unplugin-auto-import](https://github.com/unplugin/unplugin-auto-import)æ’ä»¶çš„`vite`é…ç½®ï¼š

```ts
// vite.config.ts
import AutoImport from 'unplugin-auto-import/vite'

export default defineConfig({
  //...å…¶ä»–é…ç½®
  plugins: [
    AutoImport({
      imports: [
        'vue',
        'pinia',
        'uni-app',
        {
          '@/utils/modules/pinia-auto-refs': ['useStore']
        }
      ],
      dts: 'src/types/auto-import.d.ts'
    })
  ]
})
```

`vue`é¡µé¢ä½¿ç”¨ç¤ºä¾‹ï¼š

```html
<script setup lang="ts">
  // import { ref,watch } form 'vue'
  const count = ref<number>(0)
  watch(count, (val) => {
    if (val > 3) {
      console.log('valçš„å€¼å¤§äº3')
    }
  })
</script>
```

åˆ›å»º`pinia`çš„`store`æ–‡ä»¶æ—¶ï¼Œå¯¼å‡ºå¿…é¡»ä½¿ç”¨`default`é»˜è®¤å¯¼å‡ºï¼Œå¦åˆ™`useStore`æ— æ³•è¯†åˆ«åˆ°ç›¸åº”çš„`store`æ–‡ä»¶ã€‚

```ts
const userStore = defineStore('user', () => {
  const userName = ref<string>('zyq')

  return {
    userName
  }
})

// ä½¿ç”¨defauleé»˜è®¤å¯¼å‡º
export default userStore
```

ä½¿ç”¨`useStore`å¯ä»¥è‡ªåŠ¨è¯†åˆ«`pinia`çš„`store`æ–‡ä»¶ç±»å‹ä»¥åŠå°†ç»“æ„å¯¼å‡ºçš„å˜é‡å˜æˆå“åº”å¼

```html
<script setup lang="ts">
  const { userName } = useStore('user')
</script>

<template>
  <view>{{ userName }}</view>
</template>
```

å…³äºgitæäº¤ï¼Œä½¿ç”¨`git add .`åï¼Œå¯ä»¥ä½¿ç”¨`pnpm commit`å‘½ä»¤ï¼Œé€‰æ‹©å¯¹åº”çš„æäº¤ç±»å‹å¹¶è¾“å…¥å¯¹åº”çš„æäº¤å†…å®¹åï¼Œå†`git push`åˆ°è¿œç¨‹åˆ†æ”¯ã€‚PSï¼šå¦‚æœç›´æ¥ä½¿ç”¨`vscode`çš„æäº¤ï¼Œæ ¼å¼è¦æ»¡è¶³`[æäº¤ç±»å‹]: [æäº¤å†…å®¹]`ï¼Œä¾‹å¦‚`feat: ç™»å½•åŠŸèƒ½å®Œæˆ`ã€‚
